# handlebar-force-solver

Example of how to solve handlebar forces during standing cycling using force and torque equilibrium equations.

![MATLAB figure of model](./image_frontalPlane.png)

| Author(s) | Brief Description | Intended Uses and Known Limitations | Included Material | Updated |
|-|-|-|-|-|
| Ross Wilkinson, Ph.D. | A frontal-plane model of a rider-bicycle system built within MATLAB to estimate vertical force at the left and right handlebar. | Investigate the effect of vertical CoM acceleration on peak forces generated at the left and right handlebar during standing cycling. Uses measured crank forces and rider CoM motion to solve vertical handlebar forces under the assumption of force and torque equilibrium in the frontal plane. Assumes no saddle forces, no bicycle lean, and that the rider's CoM is positioned directly above the wheel-ground contact point. |  MATLAB function. | April 19, 2021 |

## Background

Our recent evidence shows that vertical accelerations of the rider's centre of mass (CoM) are substantial when cycling off the saddle. These accelerations are caused by interaction forces between the rider and bicycle at the pedals and handlebar. It is more common for biomechanical studies of cycling to measure forces at the left and right pedal, but is less common to measure handlebar forces. Instrumenting the handlebars of a bicycle or cycling ergometer in such a way that forces acting on left and right hands of the rider can be separated is costly and difficult. Thus, a computational method for estimating handlebar forces may be a valuable resource for researchers interested in the biomechanics of standing cycling.

Vertical handlebar forces can be estimated by collecting data on the position of the rider and forces generated on the left and right pedals. This data can then be used to solve force and torque equilibrium equations of the bicycle-rider system in the frontal plane.

## Description

```matlab
function [h1, h2] = solveHandlebarForce(A1,M,L10,L11,L12,L13,P1,P2)
%SOLVEHANDLEBARFORCE This function solves vertical handlebar forces at the
%left and right handlebar during standing cycling using the origin and
%magnitude of forces generated on the pedals, the rider's mass, and
%vertical center of mass acceleration.
%
% Assumption(s):
% 1. There are no forces on the saddle.
% 2. There is no thrust on the bicycle or rider's CoM. (Note: Thrust
% decreases contact force on the rear wheel).
% 3. Aerodynamic forces and rolling resistance are negligible. 
% 4. Weight and inertia of the bicycle itself are neglected. 
% 5. All lateral forces are ignored.
% 6. No attempt to achieve moment equilibrium of the handlebar, brakes, and
% front wheel assembly, which is free to rotate about the steering tube.
% 7. Rider CoM positioned directly above rear-wheel contact.
%
% Inputs: 
% - A1: vertical acceleration of rider's center of mass (m/s^2)
% - M: mass of rider (kg)
% - L10: lateral distance from right pedal to origin (m)
% - L11: lateral distance from left pedal to origin (m)
% - L12: lateral distance from right hand to origin (m)
% - L13: lateral distance from left hand to origin (m)
% - P1: vertical reaction force on right pedal (N)
% - P2: vertical reaction force on left pedal (N)
% Outputs:
% - H1: vertical reaction force on right handlebar (N)
% - H2: vertical reaction force on left handlebar (N)
%
% Equation(s):
% H1 + H2 + P1 + P2 + M * (g+A1) == 0 (Net vertical force == 0)
% H1 * L12 + H2 * L13 + P1 * L10 + P2 * L11 == 0 (Net torque in frontal plane == 0)
%
% Reference coordinates:
% - Right-hand cartesian coordinate system.
% - Origin at point of rear-wheel contact with ground.
% - +x to the right, +y straight up, +z toward viewer.
% - Counter-clockwise torque is +ve when viewing system from the front
% - +torque generated by either upward reaction force at left pedal (++) or
% downward reaction force on right side of right pedal (--)

g = -9.80665;

syms H1 H2
eqnsHv = [H1 + H2 + P1 + P2 + M*(g+A1) == 0, H1*L12 + H2*L13 + P1*L10 + P2*L11 == 0];
[solH1, solH2] = solve(eqnsHv,[H1 H2]);
h1 = double(solH1);
h2 = double(solH2);
        
end
```
